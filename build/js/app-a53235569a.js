!function(){"use strict";angular.module("app",["app.core","app.data","app.admin.user","app.main","app.user","app.place","app.map"]),angular.module("app").run(["$rootScope","$location",function(e,t){e.$on("$routeChangeError",function(e,o,a,n){"not authorized"===n&&t.path("/")})}])}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngRoute","ngSanitize","ngResource","ngCookies","blocks.exception","blocks.logger","blocks.router","ui.bootstrap","breeze.angular","breeze.directives","ngplus","ngzWip","ivh.treeview","angularFileUpload","ui.router","oc.lazyLoad","slick","uiGmapgoogle-maps","ngGeolocation"])}(),function(){"use strict";angular.module("app.data",[])}(),function(){"use strict";angular.module("app.main",[])}(),function(){"use strict";angular.module("app.map",["uiGmapgoogle-maps","ngGeolocation"])}(),function(){"use strict";angular.module("app.place",["app.core"])}(),function(){"use strict";angular.module("app.user",[])}(),function(){"use strict";angular.module("app.admin.user",[])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.router",["ngRoute","blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";function e(e,o){function a(e){var t="Confirm Delete";e=e||"item";var o="Delete "+e+"?";return n(t,o)}function n(o,a,n,r){var i={templateUrl:"modalDialog.tpl.html",controller:t,keyboard:!0,resolve:{options:function(){return{title:o,message:a,okText:n,cancelText:r}}}};return e.open(i).result}var r={deleteDialog:a,confirmationDialog:n};return o.put("modalDialog.tpl.html",'<div>    <div class="modal-header">        <button type="button" class="close" data-dismiss="modal"             aria-hidden="true" data-ng-click="cancel()">&times;</button>        <h3>{{title}}</h3>    </div>    <div class="modal-body">        <p>{{message}}</p>    </div>    <div class="modal-footer">        <button class="btn btn-primary" data-ng-click="ok()">{{okText}}</button>        <button class="btn btn-info" data-ng-click="cancel()">{{cancelText}}</button>    </div></div>'),r}function t(e,t,o){e.title=o.title||"Title",e.message=o.message||"",e.okText=o.okText||"OK",e.cancelText=o.cancelText||"Cancel",e.ok=function(){t.close("ok")},e.cancel=function(){t.dismiss("cancel")}}angular.module("app.core").factory("bootstrap.dialog",e),e.$inject=["$modal","$templateCache"],t.$inject=["$scope","$ModalInstance","options"]}(),function(){"use strict";function e(e,t,o,a,n){function r(){return o.$broadcast.apply(o,arguments)}function i(e,t,o,n,r){r=+r||300,o||(o="filtered"+t[0].toUpperCase()+t.substr(1).toLowerCase(),n=t+"Filter");var i=function(){e[o]=e[t].filter(function(t){return e[n](t)})};return function(){var e;return function(t){e&&(a.cancel(e),e=null),t||!r?i():e=a(i,r)}}()}function l(e,t,o,n){var r=1e3;o=o||r,u[e]&&(a.cancel(u[e]),u[e]=void 0),n?t():u[e]=a(t,o)}function s(e){return/^[-]?\d+$/.test(e)}function c(t){var o=e.path(),a=o.lastIndexOf("/",o.length-2),n=o.substring(a-1);if(!s(n)){var r=o.substring(0,a+1)+t;e.path(r)}}function d(e,t){return e&&-1!==e.toLowerCase().indexOf(t.toLowerCase())}var u={},p={$broadcast:r,$q:t,$timeout:a,createSearchThrottle:i,debouncedThrottle:l,isNumber:s,logger:n,replaceLocationUrlGuidWithId:c,textContains:d};return p}angular.module("app.core").factory("common",e),e.$inject=["$location","$q","$rootScope","$timeout","logger"]}(),function(){"use strict";function e(e){function t(){new e.ValidationOptions({validateOnAttach:!1}).setAsDefault(),e.config.initializeAdapterInstance("dataService","mongo",!0),a()}function o(e){e.sort(function(e,t){return e.timeSlot.start<t.timeSlot.start?-1:e.timeSlot.start>t.timeSlot.start?1:e.speaker.firstName<t.speaker.firstName?-1:e.speaker.firstName>t.speaker.firstName?1:e.title<t.title?-1:e.title>t.title?1:0})}function a(){var t=new e.NamingConvention({name:"mongo-naming-convention",serverPropertyNameToClient:function(e){switch(e){case"_id":return"id";default:return e}},clientPropertyNameToServer:function(e){switch(e){case"id":return"_id";default:return e}}});t.setAsDefault()}var n={breeze:e,localSessionSort:o,remoteServiceName:"breeze/Breeze"};return t(),n}function t(e,t,o){function a(){t.zValidateTemplate='<span class="invalid"><i class="fa fa-warning-sign"></i>Inconceivable! %error%</span>'}o.config={enabled:!1,key:"CCAngularBreeze",events:e.events.storage,wipKey:"CCAngularBreeze.wip",appErrorPrefix:e.appErrorPrefix,newGuid:breeze.core.getUuid,version:e.version},a()}angular.module("app.core").factory("breeze.config",e).config(t),e.$inject=["breeze"],t.$inject=["config","zDirectivesConfigProvider","zStorageConfigProvider"]}(),function(){"use strict";function e(e){e.options.timeOut=4e3,e.options.positionClass="toast-bottom-right"}function t(e,t,o,a,n,i){function l(){o.html5Mode({enabled:!0,requireBase:!1})}function s(){i.options.timeOut=4e3,i.options.positionClass="toast-bottom-right"}function c(){e.debugEnabled&&e.debugEnabled(!0)}function d(){n.configure(r.appErrorPrefix)}function u(){var e=a;e.config.$routeProvider=t,e.config.docTitle="black squid",e.config.resolveAlways={}}l(),s(),c(),d(),u()}var o={backspace:8,tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46},a={imageBasePath:"../content/images/photos/",unknownPersonImageSource:"unknown_person.jpg"},n={controllerActivateSuccess:"controller.activateSuccess",entitiesChanged:"datacontext.entitiesChanged",entitiesImported:"datacontext.entitiesImported",hasChangesChanged:"datacontext.hasChangesChanged",storage:{error:"store.error",storeChanged:"store.changed",wipChanged:"wip.changed"}},r={appErrorPrefix:"[BLACK SQUID ERROR]",events:n,imageSettings:a,keyCodes:o,appTitle:"black squid",version:"1.0.0",maxAllowedCategory:5},i=angular.module("app.core");i.config(e),i.constant("config",r),i.config(t),e.$inject=["toastr"],t.$inject=["$logProvider","$routeProvider","$locationProvider","routehelperConfigProvider","exceptionConfigProvider","toastr"]}(),function(){"use strict";angular.module("app.core").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function e(e,t){function o(){a()}function a(){r.forEach(function(e){Object.defineProperty(i,e,{configurable:!0,get:function(){var t=n(e);return Object.defineProperty(i,e,{value:t,configurable:!0,enumerable:!0}),t}})})}function n(o){var a="resource."+o.toLowerCase(),n=e.get(a);return n.create(t)}var r=["user","place","category","location","city"],i={};return o(),i}angular.module("app.data").factory("datacontext",e),e.$inject=["$injector","$resource"]}(),function(){"use strict";function e(e,t,o,a,n,r,i,l,s){var c=this;c.locations,c.ready=!1,e.mapControl={},a.getCurrentPosition({timeout:6e4}).then(function(t){r.promise().then(function(e){c.locations=s.location.nearby({lat:t.coords.latitude,lng:t.coords.longitude,rad:8})}),n.then(function(a){e.map={center:{latitude:t.coords.latitude,longitude:t.coords.longitude},zoom:15,markers:[{id:0,coords:{latitude:t.coords.latitude,longitude:t.coords.longitude},options:{animation:o.google.maps.Animation.DROP,draggable:!0}}],options:{scrollwheel:!1}}})}),c.places=i.query(),c.categories=l.query(),t(function(){c.ready=!0},1e3)}angular.module("app.main").config(["uiGmapGoogleMapApiProvider",function(e){e.configure({key:"AIzaSyDQTpXj82d8UpCi97wzo_nKXL7nYrd4G70",v:"3",libraries:"weather,geometry,visualization,places"})}]).controller("MainController",e),e.$inject=["$scope","$timeout","$window","$geolocation","uiGmapGoogleMapApi","uiGmapIsReady","ResourcePlaceCache","ResourceCategoryCache","datacontext"]}(),function(){"use strict";function e(e){var t=[{url:"/",config:{templateUrl:"/app/main/main.html",controller:"MainController",controllerAs:"vm"}}];e.configureRoutes(t)}angular.module("app.main").run(e),e.$inject=["routehelper"]}(),function(){"use strict";function e(e,t,o){e.latitude="",e.longitude="",e.map={center:{latitude:40.1451,longitude:-99.668},zoom:4,markers:[],scrollwheel:!1,events:{click:function(t,o,a){var n=a[0],r=n.latLng.lat(),i=n.latLng.lng(),l={id:0,coords:{latitude:r,longitude:i},options:{draggable:!0},events:{dragend:function(e,t,o){e.getPosition().lat(),e.getPosition().lng()}}};e.map.markers[0]=l,e.latitude=r,e.longitude=i,e.$apply()}}}}angular.module("app.map").controller("MapMarker",e),e.$inject=["$scope","$timeout","logger"]}(),function(){"use strict";function e(e,t,o){}angular.module("app.map").factory("MapFactory",e),e.$inject=["$scope","$geolocation","uiGmapGoogleMapApi"]}(),function(){"use strict";angular.module("app.map").config(["uiGmapGoogleMapApiProvider",function(e){e.configure({v:"3.x",libraries:"weather,geometry,visualization"})}]).controller("Map",["$scope","$geolocation","uiGmapGoogleMapApi",function(e,t,o,a){o.getCurrentPosition({timeout:6e4}).then(function(e){var o=new google.maps.Geocoder,a=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);o.geocode({latLng:a},function(e,t){if(t===google.maps.GeocoderStatus.OK)if(e[1]){console.log(e[1].formatted_address);for(var o,a=0;a<e[0].address_components.length;a++)for(var n=0;n<e[0].address_components[a].types.length;n++)if("administrative_area_level_1"===e[0].address_components[a].types[n]){o=e[0].address_components[a];break}console.log(o.short_name+" "+o.long_name)}else console.log("Location not found");else console.log("Geocoder failed due to: "+t)}),t.map={center:{latitude:e.coords.latitude,longitude:e.coords.longitude},zoom:15,markers:[{id:0,coords:{latitude:e.coords.latitude,longitude:e.coords.longitude},options:{animation:google.maps.Animation.DROP,draggable:!0}}],options:{scrollwheel:!1,styles:[{elementType:"geometry",stylers:[{hue:"#ff4400"},{saturation:-68},{lightness:-4},{gamma:.72}]},{featureType:"road",elementType:"labels.icon"},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{hue:"#0077ff"},{gamma:3.1}]},{featureType:"water",stylers:[{hue:"#00ccff"},{gamma:.44},{saturation:-33}]},{featureType:"poi.park",stylers:[{hue:"#44ff00"},{saturation:-23}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{hue:"#007fff"},{gamma:.77},{saturation:65},{lightness:99}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{gamma:.11},{weight:5.6},{saturation:99},{hue:"#0091ff"},{lightness:-86}]},{featureType:"transit.line",elementType:"geometry",stylers:[{lightness:-48},{hue:"#ff5e00"},{gamma:1.2},{saturation:-23}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{saturation:-64},{hue:"#ff9100"},{lightness:16},{gamma:.47},{weight:2.7}]}]}}}),a.then(function(e){})}])}(),function(){"use strict";angular.module("app.place").filter("regex",function(){return function(e,t,o){for(var a=new RegExp(o),n=[],r=0;r<e.length;r++)a.test(e[r][t])&&n.push(e[r]);return n}})}(),function(){"use strict";function e(e,t,o,a,n,r,i,l,s,c,d){var u=[],p=e.uploader=new s({url:"/api/place/uploads",autoUpload:!0,queueLimit:5});p.filters.push({name:"imageFilter",fn:function(e,t){var o="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(o)}}),p.onWhenAddingFileFailed=function(e,t,o){console.info("onWhenAddingFileFailed",e,t,o)},p.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},p.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},p.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e)},p.onProgressItem=function(e,t){console.info("onProgressItem",e,t)},p.onProgressAll=function(e){console.info("onProgressAll",e)},p.onSuccessItem=function(e,t,o,a){console.info("onSuccessItem",e,t,o,a)},p.onErrorItem=function(e,t,o,a){console.info("onErrorItem",e,t,o,a)},p.onCancelItem=function(e,t,o,a){console.info("onCancelItem",e,t,o,a)},p.onCompleteItem=function(e,t,o,a){console.info("onCompleteItem",e,t,o,a),200===o&&u.push(t.filename),console.info("uploaded file name: ",t.filename)},p.onCompleteAll=function(){console.info("onCompleteAll")};var m=5,g=i.query();e.categories=g,console.log("categories: "+e.categories),e.categoryCounter=0,e.map={center:{latitude:-6.209778538009775,longitude:106.73840641829884},zoom:17,markers:[],events:{click:function(t,o,a){var n=a[0],r=n.latLng.lat(),i=n.latLng.lng(),l={id:0,coords:{latitude:r,longitude:i},options:{draggable:!0},events:{dragend:function(t,o,a){r=t.getPosition().lat(),i=t.getPosition().lng(),e.latitude=r,e.longitude=i}}};e.map.markers[0]=l,e.latitude=r,e.longitude=i,e.$apply()}},options:{}},e.changeCallback=function(t,o,n){e.categoryCounter=0,l(e.categories,function(t){t.selected&&t.children.length<=0&&e.categoryCounter++}),o&&e.categoryCounter>m&&a.warning("Number of allowed categories exceeded")},e.countries=d.query("100000000000000000000000"),e.getStates=function(t){null!==t&&(e.states=d.query(t._id))},e.getCities=function(t){null!==t&&(e.cities=d.query(t._id))},e.addNew=function(){var t=[];if(l(e.categories,function(e){e.selected&&e.children.length<=0&&t.push(e._id)}),e.categoryCounter<=m){var r={title:e.title,description:e.description,telephone:e.telephone,email:e.email,website:e.website,latitude:e.latitude,longitude:e.longitude,tags:e.tags,categories:t,images:u,address:{country:e.country,state:e.state,city:e.city}};o.addNewPlace(r).then(function(e){n.path("/places/"+e._id)},function(e){a.error(e)})}else a.warning("Exceed maximum category!")}}angular.module("app.place").controller("PlaceAddController",e).config(["ivhTreeviewOptionsProvider",function(e){e.set({defaultSelectedState:!1,validate:!0,expandToDepth:-1})}]),e.$inject=["$scope","$filter","PlaceFactory","logger","$location","IdentityFactory","ResourceCategoryCache","ivhTreeviewBfs","FileUploader","$timeout","ResourceLocationCache"]}(),function(){"use strict";function e(e,t){var o=this;e.query().$promise.then(function(e){e.forEach(function(e){e._id===t.id&&(o.place=e)})})}angular.module("app.place").controller("PlaceDetailController",e),e.$inject=["ResourcePlaceCache","$routeParams"]}(),function(){"use strict";function e(e,t,o,a,n){function r(e){var o=new a.place(e),r=t.defer();return o.$save().then(function(e){r.resolve(e),n.query().push(e)},function(e){r.reject(e.data.reason)}),r.promise}var i={addNewPlace:r};return i}angular.module("app.place").factory("PlaceFactory",e),e.$inject=["$http","$q","$rootScope","datacontext","ResourcePlaceCache"]}(),function(){"use strict";function e(e){var t=this;t.places=e.query(),t.sortOptions=[{value:"title",text:"Sort by Title"},{value:"published",text:"Sort by publish data"}],t.sortOrder=t.sortOptions[0].value}angular.module("app.place").controller("PlaceListController",e),e.$inject=["ResourcePlaceCache"]}(),function(){"use strict";function e(e,t){var o=[{url:"/places",config:{templateUrl:"/app/place/place-list.html",controller:"PlaceListController",controllerAs:"vm"}},{url:"/places/:id",config:{templateUrl:"/app/place/place-detail.html",controller:"PlaceDetailController",controllerAs:"vm"}},{url:"/places_add",config:{templateUrl:"/app/place/place-add.html",controller:"PlaceAddController",controllerAs:"vm",resolve:t.authorize.user}}];e.configureRoutes(o)}angular.module("app.place").run(e),e.$inject=["routehelper","UserFactory"]}(),function(){"use strict";function e(e){var t={support:!(!e.FileReader||!e.CanvasRenderingContext2D),isFile:function(t){return angular.isObject(t)&&t instanceof e.File},isImage:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(t)}};return{restrict:"A",template:"<canvas/>",link:function(e,o,a){function n(e){var t=new Image;t.onload=r,t.src=e.target.result}function r(){var e=i.width||this.width/this.height*i.height,t=i.height||this.height/this.width*i.width;l.attr({width:e,height:t}),l[0].getContext("2d").drawImage(this,0,0,e,t)}if(t.support){var i=e.$eval(a.ngThumb);if(t.isFile(i.file)&&t.isImage(i.file)){var l=o.find("canvas"),s=new FileReader;s.onload=n,s.readAsDataURL(i.file)}}}}}angular.module("app.place").directive("ngThumb",e),e.$inject=["$window"]}(),function(){"use strict";function e(e,t,o){var a;return t.get("bootstrappedUser")&&(a=new o.user,angular.extend(a,t.get("bootstrappedUser"))),{currentUser:a,isAuthenticated:function(){return!!this.currentUser},isAuthorized:function(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}}}angular.module("app.user").factory("IdentityFactory",e),e.$inject=["$window","$cookieStore","datacontext"]}(),function(){"use strict";function e(e,t,o,a,n,r){var i=this;i.identity=o,i.signin=function(e,t){n.authenticateUser(e,t).then(function(e){e?a.info("You have successfully signed in!"):a.warning("email/password combination incorrent")})},i.signout=function(){n.logoutUser().then(function(){t.remove("bootstrappedUser"),i.email="",i.password="",a.info("You have successfully signed out!"),r.path("/")})}}angular.module("app.user").controller("LoginController",e),e.$inject=["$http","$cookieStore","IdentityFactory","logger","UserFactory","$location"]}(),function(){"use strict";function e(e,t,o,a){e.email=o.currentUser.email,e.firstName=o.currentUser.firstName,e.lastName=o.currentUser.lastName,e.update=function(){var o={email:e.email,firstName:e.firstName,lastName:e.lastName};e.password&&e.password.length>0&&(o.password=e.password),t.updateCurrentUser(o).then(function(){a.info("Your user account has been updated")},function(e){a.error(e)})}}angular.module("app.user").controller("ProfileController",e),e.$inject=["$scope","UserFactory","IdentityFactory","logger"]}(),function(){"use strict";function e(e,t,o,a){e.signup=function(){var n={email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName};t.createUser(n).then(function(){o.info("New user created!"),a.path("/")},function(e){o.error(e)})}}angular.module("app.user").controller("SignupController",e),e.$inject=["$scope","UserFactory","logger","$location"]}(),function(){"use strict";function e(e,t,o,a,n,r){function i(e){var o=new r.user(e),a=t.defer();return o.$save().then(function(){n.currentUser=o,a.resolve()},function(e){a.reject(e.data.reason)}),a.promise}function l(e){var o=t.defer(),a=angular.copy(n.currentUser);return angular.extend(a,e),a.$update().then(function(){n.currentUser=a,o.resolve()},function(e){o.reject(e.data.reason)}),o.promise}function s(a,i){var l=t.defer();return e.post("/login",{email:a,password:i}).then(function(e){if(e.data.success){var t=new r.user;angular.extend(t,e.data.user),n.currentUser=t;var a=n.currentUser;o.put("bootstrappedUser",a),l.resolve(!0)}else l.resolve(!1)}),l.promise}function c(){var o=t.defer();return e.post("/logout",{logout:!0}).then(function(){n.currentUser=void 0,o.resolve()}),o.promise}function d(e){return n.isAuthorized(e)?!0:t.reject("not authorized")}function u(){return n.isAuthenticated()?!0:t.reject("Not authorized")}var p={admin:{auth:function(){return d("admin")}},user:{auth:function(){return u()}}},m={authorize:p,createUser:i,updateCurrentUser:l,authenticateUser:s,logoutUser:c};return m}angular.module("app.user").factory("UserFactory",e),e.$inject=["$http","$q","$cookieStore","$rootScope","IdentityFactory","datacontext"]}(),function(){"use strict";function e(e,t){var o=[{url:"/signup",config:{templateUrl:"/app/user/form-signup.html",controller:"SignupController",controllerAs:"vm"}},{url:"/profile",config:{templateUrl:"/app/user/form-profile.html",controller:"ProfileController",controllerAs:"vm",resolve:t.authorize.user}}];e.configureRoutes(o)}angular.module("app.user").run(e),e.$inject=["routehelper","UserFactory"]}(),function(){"use strict";function e(e){var t=this;t.users=e.user.query()}angular.module("app.admin.user").controller("AdminUserController",e),e.$inject=["datacontext"]}(),function(){"use strict";function e(e,o){e.configureRoutes(t(o))}function t(e){return[{url:"/admin/users",config:{templateUrl:"/app/admin/user/admin-user-list.html",controller:"AdminUserController",controllerAs:"vm",resolve:e.authorize.admin}}]}angular.module("app.admin.user").run(e),e.$inject=["routehelper","UserFactory"]}(),function(){"use strict";function e(e){function t(t){return function(o){e.error(t,o)}}var o={catcher:t};return o}angular.module("blocks.exception").factory("exception",e),e.$inject=["logger"]}(),function(){"use strict";function e(){this.config={appErrorPrefix:void 0},this.configure=function(e){this.config.appErrorPrefix=e},this.$get=function(){return{config:this.config}}}function t(e){e.decorator("$exceptionHandler",o)}function o(e,t,o){return function(a,n){var r=t.config.appErrorPrefix||"",i={exception:a,cause:n};a.message=r+a.message,e(a,n),o.error(a.message,i)}}angular.module("blocks.exception").provider("exceptionConfig",e).config(t),t.$inject=["$provide"],o.$inject=["$delegate","exceptionConfig","logger"]}(),function(){"use strict";function e(){this.config={$routeProvider:void 0,docTitle:"",resolveAlways:{ready:function(){}}},this.$get=function(){return{config:this.config}}}function t(e,t,o,a,n){function r(e){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},n.config.resolveAlways),m.when(e.url,e.config)}),m.otherwise({redirectTo:"/"})}function i(){t.$on("$routeChangeError",function(t,o,n,r){if(!d){u.errors++,d=!0;var i=o&&(o.title||o.name||o.loadedTemplateUrl)||"unknown target",l="Error routing to "+i+". "+(r.msg||"");a.warning(l,[o]),e.path("/")}})}function l(){i(),c()}function s(){for(var e in o.routes)if(o.routes.hasOwnProperty(e)){var t=o.routes[e],a=!!t.title;a&&p.push(t)}return p}function c(){t.$on("$routeChangeSuccess",function(e,o,a){u.changes++,d=!1;var r=n.config.docTitle+" "+(o.title||"");t.title=r})}var d=!1,u={errors:0,changes:0},p=[],m=n.config.$routeProvider,g={configureRoutes:r,getRoutes:s,routeCounts:u};return l(),g}angular.module("blocks.router").provider("routehelperConfig",e).factory("routehelper",t),t.$inject=["$location","$rootScope","$route","logger","routehelperConfig"]}(),function(){"use strict";function e(e,t){function o(o,a,n){t.error(o,n),e.error("Error: "+o,a)}function a(o,a,n){t.info(o,n),e.info("Info: "+o,a)}function n(o,a,n){t.success(o,n),e.success("Success: "+o,a)}function r(o,a,n){t.warning(o,n),e.warn("Warning: "+o,a)}var i={showToasts:!0,error:o,info:a,success:n,warning:r,log:e.log};return i}angular.module("blocks.logger").factory("logger",e),e.$inject=["$log","toastr"]}(),function(){"use strict";function e(e){var t;return{query:function(){return t||(t=e.category.query()),t}}}angular.module("app.data").factory("ResourceCategoryCache",e),e.$inject=["datacontext"]}(),function(){"use strict";function e(){function e(e){var t=e("/api/categories/:_id",{_id:"@id"},{update:{method:"PUT",isArray:!1}});return t}return{create:e}}angular.module("app.data").factory("resource.category",e),e.$inject=[]}(),function(){"use strict";function e(){function e(e){var t=e("/api/cities/:docCtrl/:lat/:lng/:rad",{lat:"@lat",lng:"@lng",rad:"@rad",docCtrl:"@docCtrl"},{nearby:{method:"GET",params:{docCtrl:"nearby"},isArray:!0}});return t}return{create:e}}angular.module("app.data").factory("resource.city",e),e.$inject=[]}(),function(){"use strict";function e(e){var t;return{query:function(e){return t}}}angular.module("app.data").factory("ResourceLocationCache",e),e.$inject=["datacontext"]}(),function(){"use strict";function e(){function e(e){var t=e("/api/locations/:name:docCtrl/:lat/:lng/:rad",{name:"@name",lat:"@lat",lng:"@lng",rad:"@rad",docCtrl:"@docCtrl"},{query:{method:"GET",cache:!0,isArray:!0},update:{method:"PUT",isArray:!1},nearby:{method:"GET",cache:!0,params:{docCtrl:"nearby"},isArray:!0}});return t}return{create:e}}angular.module("app.data").factory("resource.location",e),e.$inject=[]}(),function(){"use strict";function e(e){var t;return{query:function(){return t||(t=e.place.query()),t}}}angular.module("app.data").factory("ResourcePlaceCache",e),e.$inject=["datacontext"]}(),function(){"use strict";function e(){function e(e){var t=e("/api/places/:_id",{_id:"@id"},{update:{method:"PUT",isArray:!1}});return t}return{create:e}}angular.module("app.data").factory("resource.place",e),e.$inject=[]}(),function(){"use strict";function e(){function e(e){var t=e("/api/users/:id",{_id:"@id"},{update:{method:"PUT",isArray:!1}});return t.prototype.isAdmin=function(){return this.roles&&this.roles.indexOf("admin")>-1},t}return{create:e}}angular.module("app.data").factory("resource.user",e),e.$inject=[]}(),angular.module("app.core").run(["$templateCache",function(e){e.put("/app/main/main.html",'<div class="container-fluid map"><div class=carousel-inner role=listbox><div class=map><ui-gmap-google-map center=map.center zoom=map.zoom options=map.options events=map.events control=mapControl><ui-gmap-marker ng-repeat="m in map.markers" coords=m.coords idkey=m.id options=m.options></ui-gmap-marker></ui-gmap-google-map></div></div></div><div class="jumbotron gray-bg search"><div class=container><form role=form-inline><div class=col-md-8><div class=input-group><input type=text class="form-control input-lg" placeholder="Search text...."><div class=input-group-btn><button type=button class="btn btn-default dropdown-toggle btn-lg" data-toggle=dropdown aria-haspopup=true aria-expanded=false>Category <span class=caret></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href=#>Action</a></li><li><a href=#>Another action</a></li><li><a href=#>Something else here</a></li><li role=separator class=divider></li><li><a href=#>Separated link</a></li></ul><button type=button class="btn btn-default dropdown-toggle btn-lg" data-toggle=dropdown aria-haspopup=true aria-expanded=false>Location <span class=caret></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href=#>Action</a></li><li><a href=#>Another action</a></li><li><a href=#>Something else here</a></li><li role=separator class=divider></li><li><a href=#>Separated link</a></li></ul><button type=button class="btn btn-default btn-lg"><span class="glyphicon glyphicon-cog" aria-hidden=true></span></button></div></div></div><div class=col-md-2><button type=button class="btn btn-primary btn-lg btn-block"><span class="glyphicon glyphicon-search" aria-hidden=true></span> Search</button></div><div class=col-md-2><button type=button class="btn btn-lg btn-block btn-danger"><i class="fa fa-plus-circle"></i> Add Listing</button></div></form></div></div><style>\r\n.slick_demo_2 .ibox-content {\r\n    margin: 0 10px;\r\n}\r\n</style><div class=container><div data-ng-include="\'/app/main/panel-categories.html\'"></div><div data-ng-include="\'/app/main/panel-locations.html\'"></div><div data-ng-include="\'/app/main/panel-featured-place.html\'"></div><div data-ng-include="\'/app/main/panel-new-place.html\'"></div></div>'),e.put("/app/main/panel-add-listing.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class=row><div class="col-lg-offset-3 col-lg-6 col-lg-offset-3"><div class="ibox float-e-margins"><div class="ibox-content text-center p-md"><button class="btn btn-danger btn-lg btn-block" type=button><i class="fa fa-plus-circle"></i> Add Your Company to Our Catalog for Free</button></div></div></div></div></div>'),e.put("/app/main/panel-categories.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class=row><div class=col-lg-12><div class="ibox float-e-margins"><div class="ibox-content text-center p-md"><h2><span class=text-navy>MAIN CATEGORIES</span></h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit.</p></div></div></div></div><div class=row><div ng-repeat="category in vm.categories" class=col-lg-4><div class=contact-box><div class=col-md-2><i class="fa {{category.icon}} fa-2x text-navy"></i></div><div class=col-md-10><h3><strong><a href=#>{{ category.label }}</a></strong></h3><div ng-repeat="child in category.children"><div><a href=#>{{ child.label }}</a></div></div></div><div class=clearfix></div></div></div></div></div>'),e.put("/app/main/panel-featured-place.html",'<div class="wrapper wrapper-content"><div class=row><div class=col-lg-12><div class="ibox float-e-margins"><div class="ibox-content text-center p-md"><h2><span class=text-navy>FEATURED LISTING</span></h2></div></div></div></div><div class=row><div class=col-lg-12><slick class=slick_demo_2 infinite=true slides-to-show=3 slides-to-scroll=1 center-mode=false autoplay=true autoplayspeed=5000 speed=5000 dots=false responsive="[{ breakpoint: 1024, settings: { slidesToShow: 3, slidesToScroll: 3, infinite: true, dots: true } }, { breakpoint: 600, settings: { slidesToShow: 2, slidesToScroll: 2 } }, { breakpoint: 480, settings: { slidesToShow: 1, slidesToScroll: 1 } } ]" ng-if=vm.ready><div ng-repeat="place in vm.places | filter:{featured:true}"><div class=ibox-content><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap.</p><h3><a href="/places/{{ place._id }}">{{ place.title }}</a></h3></div></div></slick></div></div></div>'),e.put("/app/main/panel-locations.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class=row><div class=col-lg-12><div class="ibox float-e-margins"><div class="ibox-content text-center p-md"><h2><span class=text-navy>NEARBY LOCATION</span></h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p></div></div></div></div><div class=row><div ng-repeat="location in vm.locations" class="col-md-2 text-center"><img class=img-circle src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Generic placeholder image" width=140 height=140><h3>{{location.name}}</h3></div></div></div>'),e.put("/app/main/panel-new-place.html",'<div class="wrapper wrapper-content"><div class=row><div class=col-lg-12><div class="ibox float-e-margins"><div class="ibox-content text-center p-md"><h2><span class=text-navy>NEW LISTING</span></h2></div></div></div></div><div class=row><div class=col-lg-12><slick class=slick_demo_2 infinite=true slides-to-show=5 slides-to-scroll=5 autoplay=true autoplayspeed=5000 speed=5000 responsive="[{ breakpoint: 1024, settings: { slidesToShow: 3, slidesToScroll: 3, infinite: true, dots: true } }, { breakpoint: 600, settings: { slidesToShow: 2, slidesToScroll: 2 } }, { breakpoint: 480, settings: { slidesToShow: 1, slidesToScroll: 1 } } ]"><div ng-repeat="place in vm.places | filter:{order_by:published} | limitTo:10"><div class=ibox-content><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap.</p><h3><a href="/places/{{ place._id }}">{{ place.title }}</a></h3></div></div></slick></div></div></div>'),e.put("/app/map/map.html",'<div class=carousel-inner role=listbox><div class=map><ui-gmap-google-map center=map.center zoom=map.zoom options=map.options events=map.events control=mapControl><ui-gmap-marker ng-repeat="m in map.markers" coords=m.coords idkey=m.id options=m.options></ui-gmap-marker></ui-gmap-google-map></div></div>'),e.put("/app/place/place-add.html",'<div class=container><form name=addPlaceForm class=form-horizontal><legend><h2>Add New Place</h2><div id=map_canvas class=form-group><ui-gmap-google-map center=map.center zoom=map.zoom options=map.options events=map.events draggable><ui-gmap-marker ng-repeat="m in map.markers" coords=m.coords options=m.options events=m.events idkey=m.id></ui-gmap-marker></ui-gmap-google-map></div><div class=row><div class=col-md-6><div class=form-group><label for=coordinate>Coordinate</label><div class=row><div class=col-md-6><input name=latitude type=text placeholder=Latitude ng-model=latitude required class=form-control></div><div class=col-md-6><input name=longitude type=text placeholder=Longitude ng-model=longitude required class=form-control></div></div></div><div class=form-group><label for=title>Title</label> <input name=title type=text placeholder=Title ng-model=title required class=form-control></div><div class=form-group><label for=telephone>Telephone</label> <input name=telephone type=text placeholder=Telephone ng-model=telephone required class=form-control></div><div class=form-group><label for=email>E-mail</label> <input name=email type=text placeholder=E-mail ng-model=email required class=form-control></div><div class=form-group><label for=website>Website</label> <input name=website type=text placeholder=Website ng-model=website required class=form-control></div><div class=form-group><label for=description>Description</label> <textarea name=description placeholder=Description ng-model=description required class=form-control rows=3>\r\n                        </textarea></div></div><div class="col-md-5 col-md-offset-1"><div class=form-group>Country:<select id=country ng-model=country ng-options="item.name for item in countries" ng-change=getStates(country) ng-focus=countries><option value>Select</option></select><select id=state ng-disabled=!country ng-model=state ng-options="item.name for item in states" ng-change=getCities(state) ng-focus=!country><option value>Select</option></select><select id=city ng-disabled=!state ng-model=city ng-options="item.name for item in cities" ng-focus=!state><option value>Select</option></select></div><div class=form-group><div ng-if="categoryCounter > 5" class="alert alert-danger"><strong>Number of category allowed: {{categoryCounter}} / 5.</strong></div><div ng-if="categoryCounter <= 5" class="alert alert-success"><strong>Number of category allowed: {{categoryCounter}} / 5.</strong></div><div ivh-treeview=categories ivh-treeview-default-selected-state=false ivh-treeview-expand-to-depth=1 ivh-treeview-twistie-expanded-tpl="\'v\'" ivh-treeview-twistie-collapsed-tpl="\'>\'" ivh-treeview-twistie-leaf-tpl="\'-\'" ivh-treeview-on-cb-change="changeCallback(ivhNode, ivhIsSelected, ivhTree)"></div></div><div class=form-group nv-file-drop uploader=uploader><div class=row><div ng-show=uploader.isHTML5><div class="well my-drop-zone" nv-file-over uploader=uploader>Drop images here</div></div><br></div><div class=row ng-if="uploader.queue.length > 0"><div class=row><table class=table><thead><tr><th width=50%>Name</th><th ng-show=uploader.isHTML5>Size</th><th ng-show=uploader.isHTML5>Progress</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr ng-repeat="item in uploader.queue"><td><strong>{{ item.file.name }}</strong><div ng-show=uploader.isHTML5 ng-thumb="{ file: item._file, height: 100 }"></div></td><td ng-show=uploader.isHTML5 nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td><td ng-show=uploader.isHTML5><div class=progress style="margin-bottom: 0;"><div class=progress-bar role=progressbar ng-style="{ \'width\': item.progress + \'%\' }"></div></div></td><td class=text-center><span ng-show=item.isSuccess><i class="glyphicon glyphicon-ok"></i></span> <span ng-show=item.isCancel><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show=item.isError><i class="glyphicon glyphicon-remove"></i></span></td><td nowrap><button type=button class="btn btn-danger btn-xs" ng-click=item.remove()><span class="glyphicon glyphicon-trash"></span> Remove</button></td></tr></tbody></table><button type=button class="btn btn-danger btn-s" ng-click=uploader.clearQueue() ng-disabled=!uploader.queue.length><span class="glyphicon glyphicon-trash"></span> Remove all</button></div><div class=row><div>Queue progress:<div class=progress style><div class=progress-bar role=progressbar ng-style="{ \'width\': uploader.progress + \'%\' }"></div></div></div></div></div></div></div></div><div class=row><div class=col-md-12><div class=form-group><div class="col-md-10 col-md-offset-2"><div class=pull-right><button ng-click=addNew() ng-disable=addPlaceForm.invalid class="btn btn-primary">Submit</button> <a href="/" class="btn btn-default">Cancel</a></div></div></div></div></div></legend></form></div>'),
e.put("/app/place/place-detail.html",'<div class=container><h1>{{ vm.place.title }}</h1><div class=row><div class=col-md-6><h3 ng-show=vm.place.featured>Featured</h3><h3>Published on {{ vm.place.published | date }}</h3></div><div class=col-md-6><div class="panel panel-primary"><div class=panel-heading>Tags</div><div class=panel-body><div ng-repeat="tag in vm.place.tags">{{tag}}</div></div></div></div></div></div>'),e.put("/app/place/place-list.html",'<div class=container><div class=pull-right><form class=form-inline><div class=form-group><input ng-model=searchText placeholder=Search class=form-control></div><div class=form-group><select ng-model=sortOrder ng-options="item.value as item.text for item in vm.sortOptions" class=form-control></select></div></form></div><table class="table table-hover table-stripped table-condensed"><thead><tr><th>Title</th><th>Publish Date</th></tr></thead><tbody><tr ng-repeat="place in vm.places | filter:searchText | orderBy: vm.sortOrder"><td><a href="/places/{{ place._id }}">{{ place.title }}</a></td><td>{{ place.published | date }}</td></tr></tbody></table></div>'),e.put("/app/user/form-login.html",'<div ng-controller="LoginController as vm" class=navbar-right><form ng-hide=vm.identity.isAuthenticated() class=navbar-form><div class=form-group><input placeholder=Email ng-model=email class=form-control></div><div class=form-group><input type=password placeholder=Password ng-model=password class=form-control></div><button ng-click="vm.signin(email, password)" class="btn btn-primary">Signin</button>&nbsp;<a href=/signup class="btn btn-default">Sign up</a></form><ul ng-show=vm.identity.isAuthenticated() class="nav navbar-nav navbar-right"><li class=dropdown><a href data-toggle=dropdown class=dropdown-toggle>{{ vm.identity.currentUser.firstName + " " + vm.identity.currentUser.lastName }}<b class=caret></b></a><ul class=dropdown-menu><li ng-show=vm.identity.currentUser.isAdmin()><a href=/admin/users>User Admin</a></li><li><a href=/places_add>Add New Place</a></li><li><a href=/profile>Profile</a></li><li><a href ng-click=vm.signout()>Sign Out</a></li></ul></li></ul></div>'),e.put("/app/user/form-profile.html",'<div class=container><div class=well><form name=profileForm class=form-horizontal><fieldset><legend>User Profile<div class=form-group><label for=email class="col-md-2 control-label">Email</label><div class=col-md-10><input name=email type=email placeholder=Email ng-model=email required class=form-control></div></div><div class=form-group><label for=firstName class="col-md-2 control-label">First Name</label><div class=col-md-10><input name=firstName type=firstName placeholder="First Name" ng-model=firstName required class=form-control></div></div><div class=form-group><label for=lastName class="col-md-2 control-label">Last Name</label><div class=col-md-10><input name=lastName type=lastName placeholder="Last Name" ng-model=lastName required class=form-control></div></div><div class=form-group><label for=password class="col-md-2 control-label">Password</label><div class=col-md-10><input name=password type=password placeholder=Password ng-model=password class=form-control></div></div><div class=form-group><div class="col-md-10 col-md-offset-2"><div class=pull-right><button ng-click=update() ng-disable=profileForm.invalid class="btn btn-primary">Submit</button><a href="/" class="btn btn-default">Cancel</a></div></div></div></legend></fieldset></form></div></div>'),e.put("/app/user/form-signup.html",'<div class=container><div class=well><form name=signupForm class=form-horizontal><fieldset><legend>New User Information<div class=form-group><label for=email class="col-md-2 control-label">Email</label><div class=col-md-10><input name=email type=email placeholder=Email ng-model=email required class=form-control></div></div><div class=form-group><label for=password class="col-md-2 control-label">Password</label><div class=col-md-10><input name=password type=password placeholder=Password ng-model=password required class=form-control></div></div><div class=form-group><label for=firstName class="col-md-2 control-label">First Name</label><div class=col-md-10><input name=firstName type=firstName placeholder="First Name" ng-model=firstName required class=form-control></div></div><div class=form-group><label for=lastName class="col-md-2 control-label">Last Name</label><div class=col-md-10><input name=lastName type=lastName placeholder="Last Name" ng-model=lastName required class=form-control></div></div><div class=form-group><div class="col-md-10 col-md-offset-2"><div class=pull-right><button ng-click=signup() ng-disable=signupForm.invalid class="btn btn-primary">Submit</button><a href="/" class="btn btn-default">Cancel</a></div></div></div></legend></fieldset></form></div></div>'),e.put("/app/admin/user/admin-user-list.html","<div class=container><h1>User List</h1><table class=table><tr ng-repeat=\"user in vm.users\"><td>{{user.firstName + ' ' + user.lastName}}</td></tr></table></div>")}]);