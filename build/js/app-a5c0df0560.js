!function(){"use strict";angular.module("app",["app.core","app.data","app.admin.user","app.main","app.user","app.place","app.map"]),angular.module("app").run(["$rootScope","$location",function(e,t){e.$on("$routeChangeError",function(e,o,r,n){"not authorized"===n&&t.path("/")})}])}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngRoute","ngSanitize","ngResource","ngCookies","blocks.exception","blocks.logger","blocks.router","ui.bootstrap","breeze.angular","breeze.directives","ngplus","ngzWip","ivh.treeview","angularFileUpload","ui.router","oc.lazyLoad"])}(),function(){"use strict";angular.module("app.data",[])}(),function(){"use strict";angular.module("app.main",[])}(),function(){"use strict";angular.module("app.map",["uiGmapgoogle-maps"])}(),function(){"use strict";angular.module("app.user",[])}(),function(){"use strict";angular.module("app.place",["app.core"])}(),function(){"use strict";angular.module("app.admin.user",[])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ngRoute","blocks.logger"])}(),function(){"use strict";function e(e,o){function r(e){var t="Confirm Delete";e=e||"item";var o="Delete "+e+"?";return n(t,o)}function n(o,r,n,a){var i={templateUrl:"modalDialog.tpl.html",controller:t,keyboard:!0,resolve:{options:function(){return{title:o,message:r,okText:n,cancelText:a}}}};return e.open(i).result}var a={deleteDialog:r,confirmationDialog:n};return o.put("modalDialog.tpl.html",'<div>    <div class="modal-header">        <button type="button" class="close" data-dismiss="modal"             aria-hidden="true" data-ng-click="cancel()">&times;</button>        <h3>{{title}}</h3>    </div>    <div class="modal-body">        <p>{{message}}</p>    </div>    <div class="modal-footer">        <button class="btn btn-primary" data-ng-click="ok()">{{okText}}</button>        <button class="btn btn-info" data-ng-click="cancel()">{{cancelText}}</button>    </div></div>'),a}function t(e,t,o){e.title=o.title||"Title",e.message=o.message||"",e.okText=o.okText||"OK",e.cancelText=o.cancelText||"Cancel",e.ok=function(){t.close("ok")},e.cancel=function(){t.dismiss("cancel")}}angular.module("app.core").factory("bootstrap.dialog",e),e.$inject=["$modal","$templateCache"],t.$inject=["$scope","$ModalInstance","options"]}(),function(){"use strict";function e(e,t,o,r,n){function a(){return o.$broadcast.apply(o,arguments)}function i(e,t,o,n,a){a=+a||300,o||(o="filtered"+t[0].toUpperCase()+t.substr(1).toLowerCase(),n=t+"Filter");var i=function(){e[o]=e[t].filter(function(t){return e[n](t)})};return function(){var e;return function(t){e&&(r.cancel(e),e=null),t||!a?i():e=r(i,a)}}()}function l(e,t,o,n){var a=1e3;o=o||a,d[e]&&(r.cancel(d[e]),d[e]=void 0),n?t():d[e]=r(t,o)}function s(e){return/^[-]?\d+$/.test(e)}function c(t){var o=e.path(),r=o.lastIndexOf("/",o.length-2),n=o.substring(r-1);if(!s(n)){var a=o.substring(0,r+1)+t;e.path(a)}}function u(e,t){return e&&-1!==e.toLowerCase().indexOf(t.toLowerCase())}var d={},p={$broadcast:a,$q:t,$timeout:r,createSearchThrottle:i,debouncedThrottle:l,isNumber:s,logger:n,replaceLocationUrlGuidWithId:c,textContains:u};return p}angular.module("app.core").factory("common",e),e.$inject=["$location","$q","$rootScope","$timeout","logger"]}(),function(){"use strict";function e(e){function t(){new e.ValidationOptions({validateOnAttach:!1}).setAsDefault(),e.config.initializeAdapterInstance("dataService","mongo",!0),r()}function o(e){e.sort(function(e,t){return e.timeSlot.start<t.timeSlot.start?-1:e.timeSlot.start>t.timeSlot.start?1:e.speaker.firstName<t.speaker.firstName?-1:e.speaker.firstName>t.speaker.firstName?1:e.title<t.title?-1:e.title>t.title?1:0})}function r(){var t=new e.NamingConvention({name:"mongo-naming-convention",serverPropertyNameToClient:function(e){switch(e){case"_id":return"id";default:return e}},clientPropertyNameToServer:function(e){switch(e){case"id":return"_id";default:return e}}});t.setAsDefault()}var n={breeze:e,localSessionSort:o,remoteServiceName:"breeze/Breeze"};return t(),n}function t(e,t,o){function r(){t.zValidateTemplate='<span class="invalid"><i class="fa fa-warning-sign"></i>Inconceivable! %error%</span>'}o.config={enabled:!1,key:"CCAngularBreeze",events:e.events.storage,wipKey:"CCAngularBreeze.wip",appErrorPrefix:e.appErrorPrefix,newGuid:breeze.core.getUuid,version:e.version},r()}angular.module("app.core").factory("breeze.config",e).config(t),e.$inject=["breeze"],t.$inject=["config","zDirectivesConfigProvider","zStorageConfigProvider"]}(),function(){"use strict";function e(e){e.options.timeOut=4e3,e.options.positionClass="toast-bottom-right"}function t(e,t,o,r,n,i){function l(){o.html5Mode({enabled:!0,requireBase:!1})}function s(){i.options.timeOut=4e3,i.options.positionClass="toast-bottom-right"}function c(){e.debugEnabled&&e.debugEnabled(!0)}function u(){n.configure(a.appErrorPrefix)}function d(){var e=r;e.config.$routeProvider=t,e.config.docTitle="black squid",e.config.resolveAlways={}}l(),s(),c(),u(),d()}var o={backspace:8,tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46},r={imageBasePath:"../content/images/photos/",unknownPersonImageSource:"unknown_person.jpg"},n={controllerActivateSuccess:"controller.activateSuccess",entitiesChanged:"datacontext.entitiesChanged",entitiesImported:"datacontext.entitiesImported",hasChangesChanged:"datacontext.hasChangesChanged",storage:{error:"store.error",storeChanged:"store.changed",wipChanged:"wip.changed"}},a={appErrorPrefix:"[BLACK SQUID ERROR]",events:n,imageSettings:r,keyCodes:o,appTitle:"black squid",version:"1.0.0",maxAllowedCategory:5},i=angular.module("app.core");i.config(e),i.constant("config",a),i.config(t),e.$inject=["toastr"],t.$inject=["$logProvider","$routeProvider","$locationProvider","routehelperConfigProvider","exceptionConfigProvider","toastr"]}(),function(){"use strict";angular.module("app.core").constant("toastr",toastr).constant("moment",moment)}(),$(document).ready(function(){function e(){var e=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",e+"px");var t=$("nav.navbar-default").height(),o=$("#page-wrapper").height();t>o&&$("#page-wrapper").css("min-height",t+"px"),o>t&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&(t>o?$("#page-wrapper").css("min-height",t-60+"px"):$("#page-wrapper").css("min-height",$(window).height()-60+"px"))}$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||e()}),$(window).scroll(function(){$(window).scrollTop()>0&&!$("body").hasClass("fixed-nav")?$("#right-sidebar").addClass("sidebar-top"):$("#right-sidebar").removeClass("sidebar-top")}),setTimeout(function(){e()})}),$(function(){$(window).bind("load resize",function(){$(document).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")})})(function(){"use strict";function e(e,t){function o(){r()}function r(){a.forEach(function(e){Object.defineProperty(i,e,{configurable:!0,get:function(){var t=n(e);return Object.defineProperty(i,e,{value:t,configurable:!0,enumerable:!0}),t}})})}function n(o){var r="resource."+o.toLowerCase(),n=e.get(r);return n.create(t)}var a=["user","place","category","location"],i={};return o(),i}angular.module("app.data").factory("datacontext",e),e.$inject=["$injector","$resource"]})(),function(){"use strict";function e(e){var t=this;t.places=e.query()}angular.module("app.main").controller("MainController",e),e.$inject=["ResourcePlaceCache"]}(),function(){"use strict";function e(e){var t=[{url:"/",config:{templateUrl:"/app/main/main.html",controller:"MainController",controllerAs:"vm"}}];e.configureRoutes(t)}angular.module("app.main").run(e),e.$inject=["routehelper"]}(),function(){"use strict";function e(e,t,o){e.latitude="",e.longitude="",e.map={center:{latitude:40.1451,longitude:-99.668},zoom:4,markers:[],scrollwheel:!1,events:{click:function(t,o,r){var n=r[0],a=n.latLng.lat(),i=n.latLng.lng(),l={id:0,coords:{latitude:a,longitude:i},options:{draggable:!0},events:{dragend:function(e,t,o){e.getPosition().lat(),e.getPosition().lng()}}};e.map.markers[0]=l,e.latitude=a,e.longitude=i,e.$apply()}}}}angular.module("app.map").controller("MapMarker",e),e.$inject=["$scope","$timeout","logger"]}(),function(){"use strict";angular.module("app.map").config(["uiGmapGoogleMapApiProvider",function(e){e.configure({v:"3.x",libraries:"weather,geometry,visualization"})}]).controller("Map",["$scope","uiGmapGoogleMapApi",function(e,t){e.map={center:{latitude:45,longitude:-73},zoom:8,options:{scrollwheel:!1}},t.then(function(e){})}])}(),function(){"use strict";function e(e,t,o){var r;return t.get("bootstrappedUser")&&(r=new o.user,angular.extend(r,t.get("bootstrappedUser"))),{currentUser:r,isAuthenticated:function(){return!!this.currentUser},isAuthorized:function(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}}}angular.module("app.user").factory("IdentityFactory",e),e.$inject=["$window","$cookieStore","datacontext"]}(),function(){"use strict";function e(e,t,o,r,n,a){var i=this;i.identity=o,i.signin=function(e,t){n.authenticateUser(e,t).then(function(e){e?r.info("You have successfully signed in!"):r.warning("email/password combination incorrent")})},i.signout=function(){n.logoutUser().then(function(){t.remove("bootstrappedUser"),i.email="",i.password="",r.info("You have successfully signed out!"),a.path("/")})}}angular.module("app.user").controller("LoginController",e),e.$inject=["$http","$cookieStore","IdentityFactory","logger","UserFactory","$location"]}(),function(){"use strict";function e(e,t,o,r){e.email=o.currentUser.email,e.firstName=o.currentUser.firstName,e.lastName=o.currentUser.lastName,e.update=function(){var o={email:e.email,firstName:e.firstName,lastName:e.lastName};e.password&&e.password.length>0&&(o.password=e.password),t.updateCurrentUser(o).then(function(){r.info("Your user account has been updated")},function(e){r.error(e)})}}angular.module("app.user").controller("ProfileController",e),e.$inject=["$scope","UserFactory","IdentityFactory","logger"]}(),function(){"use strict";function e(e,t,o,r){e.signup=function(){var n={email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName};t.createUser(n).then(function(){o.info("New user created!"),r.path("/")},function(e){o.error(e)})}}angular.module("app.user").controller("SignupController",e),e.$inject=["$scope","UserFactory","logger","$location"]}(),function(){"use strict";function e(e,t,o,r,n,a){function i(e){var o=new a.user(e),r=t.defer();return o.$save().then(function(){n.currentUser=o,r.resolve()},function(e){r.reject(e.data.reason)}),r.promise}function l(e){var o=t.defer(),r=angular.copy(n.currentUser);return angular.extend(r,e),r.$update().then(function(){n.currentUser=r,o.resolve()},function(e){o.reject(e.data.reason)}),o.promise}function s(r,i){var l=t.defer();return e.post("/login",{email:r,password:i}).then(function(e){if(e.data.success){var t=new a.user;angular.extend(t,e.data.user),n.currentUser=t;var r=n.currentUser;o.put("bootstrappedUser",r),l.resolve(!0)}else l.resolve(!1)}),l.promise}function c(){var o=t.defer();return e.post("/logout",{logout:!0}).then(function(){n.currentUser=void 0,o.resolve()}),o.promise}function u(e){return n.isAuthorized(e)?!0:t.reject("not authorized")}function d(){return n.isAuthenticated()?!0:t.reject("Not authorized")}var p={admin:{auth:function(){return u("admin")}},user:{auth:function(){return d()}}},m={authorize:p,createUser:i,updateCurrentUser:l,authenticateUser:s,logoutUser:c};return m}angular.module("app.user").factory("UserFactory",e),e.$inject=["$http","$q","$cookieStore","$rootScope","IdentityFactory","datacontext"]}(),function(){"use strict";function e(e,t){var o=[{url:"/signup",config:{templateUrl:"/app/user/form-signup.html",controller:"SignupController",controllerAs:"vm"}},{url:"/profile",config:{templateUrl:"/app/user/form-profile.html",controller:"ProfileController",controllerAs:"vm",resolve:t.authorize.user}}];e.configureRoutes(o)}angular.module("app.user").run(e),e.$inject=["routehelper","UserFactory"]}(),function(){"use strict";angular.module("app.place").filter("regex",function(){return function(e,t,o){for(var r=new RegExp(o),n=[],a=0;a<e.length;a++)r.test(e[a][t])&&n.push(e[a]);return n}})}(),function(){"use strict";function e(e,t,o,r,n,a,i,l,s,c,u){var d=[],p=e.uploader=new s({url:"/api/place/uploads",autoUpload:!0,queueLimit:5});p.filters.push({name:"imageFilter",fn:function(e,t){var o="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(o)}}),p.onWhenAddingFileFailed=function(e,t,o){console.info("onWhenAddingFileFailed",e,t,o)},p.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},p.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},p.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e)},p.onProgressItem=function(e,t){console.info("onProgressItem",e,t)},p.onProgressAll=function(e){console.info("onProgressAll",e)},p.onSuccessItem=function(e,t,o,r){console.info("onSuccessItem",e,t,o,r)},p.onErrorItem=function(e,t,o,r){console.info("onErrorItem",e,t,o,r)},p.onCancelItem=function(e,t,o,r){console.info("onCancelItem",e,t,o,r)},p.onCompleteItem=function(e,t,o,r){console.info("onCompleteItem",e,t,o,r),200===o&&d.push(t.filename),console.info("uploaded file name: ",t.filename)},p.onCompleteAll=function(){console.info("onCompleteAll")};var m=5,g=i.query();e.categories=g,console.log("categories: "+e.categories),e.categoryCounter=0,e.map={center:{latitude:-6.209778538009775,longitude:106.73840641829884},zoom:17,markers:[],events:{click:function(t,o,r){var n=r[0],a=n.latLng.lat(),i=n.latLng.lng(),l={id:0,coords:{latitude:a,longitude:i},options:{draggable:!0},events:{dragend:function(t,o,r){a=t.getPosition().lat(),i=t.getPosition().lng(),e.latitude=a,e.longitude=i}}};e.map.markers[0]=l,e.latitude=a,e.longitude=i,e.$apply()}},options:{}},e.changeCallback=function(t,o,n){e.categoryCounter=0,l(e.categories,function(t){t.selected&&t.children.length<=0&&e.categoryCounter++}),o&&e.categoryCounter>m&&r.warning("Number of allowed categories exceeded")},e.countries=u.query("100000000000000000000000"),e.getStates=function(t){null!==t&&(e.states=u.query(t._id))},e.getCities=function(t){null!==t&&(e.cities=u.query(t._id))},e.addNew=function(){var t=[];if(l(e.categories,function(e){e.selected&&e.children.length<=0&&t.push(e._id)}),e.categoryCounter<=m){var a={title:e.title,description:e.description,telephone:e.telephone,email:e.email,website:e.website,latitude:e.latitude,longitude:e.longitude,tags:e.tags,categories:t,images:d,address:{country:e.country,state:e.state,city:e.city}};o.addNewPlace(a).then(function(e){n.path("/places/"+e._id)},function(e){r.error(e)})}else r.warning("Exceed maximum category!")}}angular.module("app.place").controller("PlaceAddController",e).config(["ivhTreeviewOptionsProvider",function(e){e.set({defaultSelectedState:!1,validate:!0,expandToDepth:-1})}]),e.$inject=["$scope","$filter","PlaceFactory","logger","$location","IdentityFactory","ResourceCategoryCache","ivhTreeviewBfs","FileUploader","$timeout","ResourceLocationCache"]}(),function(){"use strict";function e(e,t){var o=this;e.query().$promise.then(function(e){e.forEach(function(e){e._id===t.id&&(o.place=e)})})}angular.module("app.place").controller("PlaceDetailController",e),e.$inject=["ResourcePlaceCache","$routeParams"]}(),function(){"use strict";function e(e,t,o,r,n){function a(e){var o=new r.place(e),a=t.defer();return o.$save().then(function(e){a.resolve(e),n.query().push(e)},function(e){a.reject(e.data.reason)}),a.promise}var i={addNewPlace:a};return i}angular.module("app.place").factory("PlaceFactory",e),e.$inject=["$http","$q","$rootScope","datacontext","ResourcePlaceCache"]}(),function(){"use strict";function e(e){var t=this;t.places=e.query(),t.sortOptions=[{value:"title",text:"Sort by Title"},{value:"published",text:"Sort by publish data"}],t.sortOrder=t.sortOptions[0].value}angular.module("app.place").controller("PlaceListController",e),e.$inject=["ResourcePlaceCache"]}(),function(){"use strict";function e(e,t){var o=[{url:"/places",config:{templateUrl:"/app/place/place-list.html",controller:"PlaceListController",controllerAs:"vm"}},{url:"/places/:id",config:{templateUrl:"/app/place/place-detail.html",controller:"PlaceDetailController",controllerAs:"vm"}},{url:"/places_add",config:{templateUrl:"/app/place/place-add.html",controller:"PlaceAddController",controllerAs:"vm",resolve:t.authorize.user}}];e.configureRoutes(o)}angular.module("app.place").run(e),e.$inject=["routehelper","UserFactory"]}(),function(){"use strict";function e(e){var t={support:!(!e.FileReader||!e.CanvasRenderingContext2D),isFile:function(t){return angular.isObject(t)&&t instanceof e.File},isImage:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(t)}};return{restrict:"A",template:"<canvas/>",link:function(e,o,r){function n(e){var t=new Image;t.onload=a,t.src=e.target.result}function a(){var e=i.width||this.width/this.height*i.height,t=i.height||this.height/this.width*i.width;l.attr({width:e,height:t}),l[0].getContext("2d").drawImage(this,0,0,e,t)}if(t.support){var i=e.$eval(r.ngThumb);if(t.isFile(i.file)&&t.isImage(i.file)){var l=o.find("canvas"),s=new FileReader;s.onload=n,s.readAsDataURL(i.file)}}}}}angular.module("app.place").directive("ngThumb",e),e.$inject=["$window"]}(),function(){"use strict";function e(e){var t=this;t.users=e.user.query()}angular.module("app.admin.user").controller("AdminUserController",e),e.$inject=["datacontext"]}(),function(){"use strict";function e(e,o){e.configureRoutes(t(o))}function t(e){return[{url:"/admin/users",config:{templateUrl:"/app/admin/user/admin-user-list.html",controller:"AdminUserController",controllerAs:"vm",resolve:e.authorize.admin}}]}angular.module("app.admin.user").run(e),e.$inject=["routehelper","UserFactory"]}(),function(){"use strict";function e(e){function t(t){return function(o){e.error(t,o)}}var o={catcher:t};return o}angular.module("blocks.exception").factory("exception",e),e.$inject=["logger"]}(),function(){"use strict";function e(){this.config={appErrorPrefix:void 0},this.configure=function(e){this.config.appErrorPrefix=e},this.$get=function(){return{config:this.config}}}function t(e){e.decorator("$exceptionHandler",o)}function o(e,t,o){return function(r,n){var a=t.config.appErrorPrefix||"",i={exception:r,cause:n};r.message=a+r.message,e(r,n),o.error(r.message,i)}}angular.module("blocks.exception").provider("exceptionConfig",e).config(t),t.$inject=["$provide"],o.$inject=["$delegate","exceptionConfig","logger"]}(),function(){"use strict";function e(e,t){function o(o,r,n){t.error(o,n),e.error("Error: "+o,r)}function r(o,r,n){t.info(o,n),e.info("Info: "+o,r)}function n(o,r,n){t.success(o,n),e.success("Success: "+o,r)}function a(o,r,n){t.warning(o,n),e.warn("Warning: "+o,r)}var i={showToasts:!0,error:o,info:r,success:n,warning:a,log:e.log};return i}angular.module("blocks.logger").factory("logger",e),e.$inject=["$log","toastr"]}(),function(){"use strict";function e(){this.config={$routeProvider:void 0,docTitle:"",resolveAlways:{ready:function(){}}},this.$get=function(){return{config:this.config}}}function t(e,t,o,r,n){function a(e){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},n.config.resolveAlways),m.when(e.url,e.config)}),m.otherwise({redirectTo:"/"})}function i(){t.$on("$routeChangeError",function(t,o,n,a){if(!u){d.errors++,u=!0;var i=o&&(o.title||o.name||o.loadedTemplateUrl)||"unknown target",l="Error routing to "+i+". "+(a.msg||"");r.warning(l,[o]),e.path("/")}})}function l(){i(),c()}function s(){for(var e in o.routes)if(o.routes.hasOwnProperty(e)){var t=o.routes[e],r=!!t.title;r&&p.push(t)}return p}function c(){t.$on("$routeChangeSuccess",function(e,o,r){d.changes++,u=!1;var a=n.config.docTitle+" "+(o.title||"");t.title=a})}var u=!1,d={errors:0,changes:0},p=[],m=n.config.$routeProvider,g={configureRoutes:a,getRoutes:s,routeCounts:d};return l(),g}angular.module("blocks.router").provider("routehelperConfig",e).factory("routehelper",t),t.$inject=["$location","$rootScope","$route","logger","routehelperConfig"]}(),function(){"use strict";function e(e){var t;return{query:function(){return t||(t=e.category.query()),t}}}angular.module("app.data").factory("ResourceCategoryCache",e),e.$inject=["datacontext"]}(),function(){"use strict";function e(){function e(e){var t=e("/api/categories/:_id",{_id:"@id"},{update:{method:"PUT",isArray:!1}});return t}return{create:e}}angular.module("app.data").factory("resource.category",e),e.$inject=[]}(),function(){"use strict";function e(e){var t;return{query:function(o){return t=e.location.query({parentId:o})}}}angular.module("app.data").factory("ResourceLocationCache",e),e.$inject=["datacontext"]}(),function(){"use strict";function e(){function e(e){var t=e("/api/locations/:parentId",{parentId:"@parentId"},{query:{method:"GET",cache:!0,isArray:!0},update:{method:"PUT",isArray:!1}});return t}return{create:e}}angular.module("app.data").factory("resource.location",e),e.$inject=[]}(),function(){"use strict";function e(e){var t;return{query:function(){return t||(t=e.place.query()),t}}}angular.module("app.data").factory("ResourcePlaceCache",e),e.$inject=["datacontext"]}(),function(){"use strict";function e(){function e(e){var t=e("/api/places/:_id",{_id:"@id"},{update:{method:"PUT",isArray:!1}});return t}return{create:e}}angular.module("app.data").factory("resource.place",e),e.$inject=[]}(),function(){"use strict";function e(){function e(e){var t=e("/api/users/:id",{_id:"@id"},{update:{method:"PUT",isArray:!1}});return t.prototype.isAdmin=function(){return this.roles&&this.roles.indexOf("admin")>-1},t}return{create:e}}angular.module("app.data").factory("resource.user",e),e.$inject=[]}(),angular.module("app.core").run(["$templateCache",function(e){e.put("/app/main/main.html",'<div class="container-fluid map"><div data-ng-include="\'/app/map/map.html\'"></div></div><div class=container><div class=row><div class=col-md-12><div data-ng-include="\'/app/main/panel-featured-place.html\'"></div></div></div><div class=row><div class=col-md-12><div data-ng-include="\'/app/main/panel-new-place.html\'"></div></div></div></div>'),e.put("/app/main/panel-featured-place.html",'<div class="panel panel-primary"><div class="panel-heading text-center">Featured places</div><div class=panel-body><div ng-repeat="place in vm.places | filter:{featured:true}" class=row><div class=col-md-12><a href="/places/{{ place._id }}">{{ place.title }}</a></div></div></div></div>'),e.put("/app/main/panel-new-place.html",'<div class="panel panel-primary"><div class="panel-heading text-center">New places</div><div class=panel-body><div ng-repeat="place in vm.places | filter:{order_by:published} | limitTo:10" class=row><div class=col-md-3>{{place.published | date:\'MMM d\'}}</div><div class=col-md-9><a href="/places/{{ place._id }}">{{ place.title }}</a></div></div></div></div>'),e.put("/app/map/map.html",'<div class=carousel-inner role=listbox data-ng-controller="Map as vm"><div class=map><ui-gmap-google-map center=map.center zoom=map.zoom options=map.options></ui-gmap-google-map></div></div>'),e.put("/app/place/place-add.html",'<div class=container><form name=addPlaceForm class=form-horizontal><legend><h2>Add New Place</h2><div class=row><div id=map_canvas class=form-group><ui-gmap-google-map center=map.center zoom=map.zoom options=map.options events=map.events draggable><ui-gmap-marker ng-repeat="m in map.markers" coords=m.coords options=m.options events=m.events idkey=m.id></ui-gmap-marker></ui-gmap-google-map></div></div><div class=row><div class=col-md-6><div class=form-group><label for=coordinate>Coordinate</label><div class=row><div class=col-md-6><input name=latitude type=text placeholder=Latitude ng-model=latitude required class=form-control></div><div class=col-md-6><input name=longitude type=text placeholder=Longitude ng-model=longitude required class=form-control></div></div></div><div class=form-group><label for=title>Title</label> <input name=title type=text placeholder=Title ng-model=title required class=form-control></div><div class=form-group><label for=telephone>Telephone</label> <input name=telephone type=text placeholder=Telephone ng-model=telephone required class=form-control></div><div class=form-group><label for=email>E-mail</label> <input name=email type=text placeholder=E-mail ng-model=email required class=form-control></div><div class=form-group><label for=website>Website</label> <input name=website type=text placeholder=Website ng-model=website required class=form-control></div><div class=form-group><label for=description>Description</label> <textarea name=description placeholder=Description ng-model=description required class=form-control rows=3>\r\n                        </textarea></div></div><div class="col-md-5 col-md-offset-1"><div class=form-group>Country:<select id=country ng-model=country ng-options="item.name for item in countries" ng-change=getStates(country) ng-focus=countries><option value>Select</option></select><select id=state ng-disabled=!country ng-model=state ng-options="item.name for item in states" ng-change=getCities(state) ng-focus=!country><option value>Select</option></select><select id=city ng-disabled=!state ng-model=city ng-options="item.name for item in cities" ng-focus=!state><option value>Select</option></select></div><div class=form-group><div ng-if="categoryCounter > 5" class="alert alert-danger"><strong>Number of category allowed: {{categoryCounter}} / 5.</strong></div><div ng-if="categoryCounter <= 5" class="alert alert-success"><strong>Number of category allowed: {{categoryCounter}} / 5.</strong></div><div ivh-treeview=categories ivh-treeview-default-selected-state=false ivh-treeview-expand-to-depth=1 ivh-treeview-twistie-expanded-tpl="\'v\'" ivh-treeview-twistie-collapsed-tpl="\'>\'" ivh-treeview-twistie-leaf-tpl="\'-\'" ivh-treeview-on-cb-change="changeCallback(ivhNode, ivhIsSelected, ivhTree)"></div></div><div class=form-group nv-file-drop uploader=uploader><div class=row><div ng-show=uploader.isHTML5><div class="well my-drop-zone" nv-file-over uploader=uploader>Drop images here</div></div><br></div><div class=row ng-if="uploader.queue.length > 0"><div class=row><table class=table><thead><tr><th width=50%>Name</th><th ng-show=uploader.isHTML5>Size</th><th ng-show=uploader.isHTML5>Progress</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr ng-repeat="item in uploader.queue"><td><strong>{{ item.file.name }}</strong><div ng-show=uploader.isHTML5 ng-thumb="{ file: item._file, height: 100 }"></div></td><td ng-show=uploader.isHTML5 nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td><td ng-show=uploader.isHTML5><div class=progress style="margin-bottom: 0;"><div class=progress-bar role=progressbar ng-style="{ \'width\': item.progress + \'%\' }"></div></div></td><td class=text-center><span ng-show=item.isSuccess><i class="glyphicon glyphicon-ok"></i></span> <span ng-show=item.isCancel><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show=item.isError><i class="glyphicon glyphicon-remove"></i></span></td><td nowrap><button type=button class="btn btn-danger btn-xs" ng-click=item.remove()><span class="glyphicon glyphicon-trash"></span> Remove</button></td></tr></tbody></table><button type=button class="btn btn-danger btn-s" ng-click=uploader.clearQueue() ng-disabled=!uploader.queue.length><span class="glyphicon glyphicon-trash"></span> Remove all</button></div><div class=row><div>Queue progress:<div class=progress style><div class=progress-bar role=progressbar ng-style="{ \'width\': uploader.progress + \'%\' }"></div></div></div></div></div></div></div></div><div class=row><div class=col-md-12><div class=form-group><div class="col-md-10 col-md-offset-2"><div class=pull-right><button ng-click=addNew() ng-disable=addPlaceForm.invalid class="btn btn-primary">Submit</button> <a href="/" class="btn btn-default">Cancel</a></div></div></div></div></div></legend></form></div>'),e.put("/app/place/place-detail.html",'<div class=container><h1>{{ vm.place.title }}</h1><div class=row><div class=col-md-6><h3 ng-show=vm.place.featured>Featured</h3><h3>Published on {{ vm.place.published | date }}</h3></div><div class=col-md-6><div class="panel panel-primary"><div class=panel-heading>Tags</div><div class=panel-body><div ng-repeat="tag in vm.place.tags">{{tag}}</div></div></div></div></div></div>'),e.put("/app/place/place-list.html",'<div class=container><div class=pull-right><form class=form-inline><div class=form-group><input ng-model=searchText placeholder=Search class=form-control></div><div class=form-group><select ng-model=sortOrder ng-options="item.value as item.text for item in vm.sortOptions" class=form-control></select></div></form></div><table class="table table-hover table-stripped table-condensed"><thead><tr><th>Title</th><th>Publish Date</th></tr></thead><tbody><tr ng-repeat="place in vm.places | filter:searchText | orderBy: vm.sortOrder"><td><a href="/places/{{ place._id }}">{{ place.title }}</a></td><td>{{ place.published | date }}</td></tr></tbody></table></div>'),e.put("/app/user/form-login.html",'<div ng-controller="LoginController as vm" class=navbar-right><form ng-hide=vm.identity.isAuthenticated() class=navbar-form><div class=form-group><input placeholder=Email ng-model=email class=form-control></div><div class=form-group><input type=password placeholder=Password ng-model=password class=form-control></div><button ng-click="vm.signin(email, password)" class="btn btn-primary">Signin</button>&nbsp;<a href=/signup class="btn btn-default">Sign up</a></form><ul ng-show=vm.identity.isAuthenticated() class="nav navbar-nav navbar-right"><li class=dropdown><a href data-toggle=dropdown class=dropdown-toggle>{{ vm.identity.currentUser.firstName + " " + vm.identity.currentUser.lastName }}<b class=caret></b></a><ul class=dropdown-menu><li ng-show=vm.identity.currentUser.isAdmin()><a href=/admin/users>User Admin</a></li><li><a href=/places_add>Add New Place</a></li><li><a href=/profile>Profile</a></li><li><a href ng-click=vm.signout()>Sign Out</a></li></ul></li></ul></div>'),e.put("/app/user/form-profile.html",'<div class=container><div class=well><form name=profileForm class=form-horizontal><fieldset><legend>User Profile<div class=form-group><label for=email class="col-md-2 control-label">Email</label><div class=col-md-10><input name=email type=email placeholder=Email ng-model=email required class=form-control></div></div><div class=form-group><label for=firstName class="col-md-2 control-label">First Name</label><div class=col-md-10><input name=firstName type=firstName placeholder="First Name" ng-model=firstName required class=form-control></div></div><div class=form-group><label for=lastName class="col-md-2 control-label">Last Name</label><div class=col-md-10><input name=lastName type=lastName placeholder="Last Name" ng-model=lastName required class=form-control></div></div><div class=form-group><label for=password class="col-md-2 control-label">Password</label><div class=col-md-10><input name=password type=password placeholder=Password ng-model=password class=form-control></div></div><div class=form-group><div class="col-md-10 col-md-offset-2"><div class=pull-right><button ng-click=update() ng-disable=profileForm.invalid class="btn btn-primary">Submit</button><a href="/" class="btn btn-default">Cancel</a></div></div></div></legend></fieldset></form></div></div>'),e.put("/app/user/form-signup.html",'<div class=container><div class=well><form name=signupForm class=form-horizontal><fieldset><legend>New User Information<div class=form-group><label for=email class="col-md-2 control-label">Email</label><div class=col-md-10><input name=email type=email placeholder=Email ng-model=email required class=form-control></div></div><div class=form-group><label for=password class="col-md-2 control-label">Password</label><div class=col-md-10><input name=password type=password placeholder=Password ng-model=password required class=form-control></div></div><div class=form-group><label for=firstName class="col-md-2 control-label">First Name</label><div class=col-md-10><input name=firstName type=firstName placeholder="First Name" ng-model=firstName required class=form-control></div></div><div class=form-group><label for=lastName class="col-md-2 control-label">Last Name</label><div class=col-md-10><input name=lastName type=lastName placeholder="Last Name" ng-model=lastName required class=form-control></div></div><div class=form-group><div class="col-md-10 col-md-offset-2"><div class=pull-right><button ng-click=signup() ng-disable=signupForm.invalid class="btn btn-primary">Submit</button><a href="/" class="btn btn-default">Cancel</a></div></div></div></legend></fieldset></form></div></div>'),
e.put("/app/admin/user/admin-user-list.html","<div class=container><h1>User List</h1><table class=table><tr ng-repeat=\"user in vm.users\"><td>{{user.firstName + ' ' + user.lastName}}</td></tr></table></div>")}]);