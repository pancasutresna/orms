<div class="container">
    <form name="addPlaceForm" class="form-horizontal">
        <legend>
            <h2>Add New Place</h2>
            <div class="row">
                <div id="map_canvas" class="form-group">
                    <ui-gmap-google-map center="map.center" zoom="map.zoom" options="map.options" events="map.events" draggable="true">
                        <ui-gmap-marker ng-repeat="m in map.markers" coords="m.coords" options="m.options" events="m.events" idkey="m.id">
                        </ui-gmap-marker>
                    </ui-gmap-google-map>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="coordinate">Coordinate</label>
                        <div class="row">
                            <div class="col-md-6">
                                <input name="latitude" type="text" placeholder="Latitude" ng-model="latitude" required="required" class="form-control" />
                            </div>
                            <div class="col-md-6">
                                <input name="longitude" type="text" placeholder="Longitude" ng-model="longitude" required="required" class="form-control" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="title">Title</label>
                        <input name="title" type="text" placeholder="Title" ng-model="title" required="required" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label for="telephone">Telephone</label>
                        <input name="telephone" type="text" placeholder="Telephone" ng-model="telephone" required="required" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label for="email">E-mail</label>
                        <input name="email" type="text" placeholder="E-mail" ng-model="email" required="required" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label for="website">Website</label>
                        <input name="website" type="text" placeholder="Website" ng-model="website" required="required" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea name="description" placeholder="Description" ng-model="description" required="required" class="form-control" rows="3">
                        </textarea>
                    </div>
                </div>
                <div class="col-md-5 col-md-offset-1">
                    <div class="form-group">
                        Country:
                        <select id="country" ng-model="country" ng-options="item.country for item in countries" ng-change="getSelectedCountry(country)">
                            <option value=''>Select</option>
                        </select>
                         <select id="state" ng-disabled="!country" ng-model="states" ng-options="item.state for item in country.states" ng-change="getSelectedState(states)">
                            <option value=''>Select</option>
                        </select>

                        City:
                        <select id="city" ng-disabled="!states || !country" ng-model="city">
                            <option value=''>
                                Select</option>
                            <option ng-repeat="city in states.city" value='{{city}}'>{{city}}</option>
                        </select> 
                        <!--
                        <div style='height: 15px;'>
                            &nbsp;</div>
                        <div>
                            <span>Selected Country: </span>
                            <label>
                                {{strCountry}}</label>
                        </div>
                        <div style='height: 15px;'>
                            &nbsp;</div>
                        <div>
                            <span>Selected State: </span>
                            <label>
                                {{strState}}</label>
                        </div>
                        <div style='height: 15px;'>
                            &nbsp;</div>
                             -->
                        <div>
                            <span>Selected City: </span>
                            <label>
                                {{city}}</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <div ng-if="categoryCounter > 5" class="alert alert-danger">
                            <strong>Number of category allowed: {{categoryCounter}} / 5.</strong>
                        </div>
                        <div ng-if="categoryCounter <= 5" class="alert alert-success">
                            <strong>Number of category allowed: {{categoryCounter}} / 5.</strong>
                        </div>
                        <div ivh-treeview="categories" ivh-treeview-default-selected-state="false" ivh-treeview-expand-to-depth="1" ivh-treeview-twistie-expanded-tpl="'v'" ivh-treeview-twistie-collapsed-tpl="'>'" ivh-treeview-twistie-leaf-tpl="'-'" ivh-treeview-on-cb-change="changeCallback(ivhNode, ivhIsSelected, ivhTree)">
                        </div>
                    </div>
                    <div class="form-group" nv-file-drop="" uploader="uploader">
                        <div class="row">
                            <div ng-show="uploader.isHTML5">
                                <div class="well my-drop-zone" nv-file-over="" uploader="uploader">
                                    Drop images here
                                </div>
                            </div>
                            <br/>
                        </div>
                        <div class="row" ng-if="uploader.queue.length > 0">
                            <!-- <p>Queue length: {{ uploader.queue.length }}</p> -->
                            <div class="row">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th width="50%">Name</th>
                                            <th ng-show="uploader.isHTML5">Size</th>
                                            <th ng-show="uploader.isHTML5">Progress</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="item in uploader.queue">
                                            <td>
                                                <strong>{{ item.file.name }}</strong>
                                                <!-- Image preview -->
                                                <!--auto height-->
                                                <!--<div ng-thumb="{ file: item.file, width: 100 }"></div>-->
                                                <!--auto width-->
                                                <div ng-show="uploader.isHTML5" ng-thumb="{ file: item._file, height: 100 }"></div>
                                                <!--fixed width and height -->
                                                <!--<div ng-thumb="{ file: item.file, width: 100, height: 100 }"></div>-->
                                            </td>
                                            <td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>
                                            <td ng-show="uploader.isHTML5">
                                                <div class="progress" style="margin-bottom: 0;">
                                                    <div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
                                                </div>
                                            </td>
                                            <td class="text-center">
                                                <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
                                                <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                                                <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
                                            </td>
                                            <td nowrap>
                                                <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">
                                                    <span class="glyphicon glyphicon-trash"></span> Remove
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <button type="button" class="btn btn-danger btn-s" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length">
                                    <span class="glyphicon glyphicon-trash"></span> Remove all
                                </button>
                            </div>
                            <div class="row">
                                <div>
                                    Queue progress:
                                    <div class="progress" style="">
                                        <div class="progress-bar" role="progressbar" ng-style="{ 'width': uploader.progress + '%' }"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--                     <div class="form-group">
                        <label for="upload">Drop files</label>
                        <div ngf-drop ngf-select ng-model="files" class="drop-box" ngf-drag-over-class="'dragover'" ngf-multiple="true" ngf-allow-dir="true" accept="image/*" ngf-pattern="'image/*'">Drop images here or click to upload</div>
                        <div ngf-no-file-drop>File Drag/Drop is not supported for this browser</div>
                        <div ng-if="files">
                            Files:
                            <ul>
                                <li ng-repeat="f in files" style="font:smaller">
                                    {{f.name}} {{f.$error}} {{f.$errorParam}}
                                </li>
                            </ul>
                        </div>
                        Upload Log:
                        <pre>{{log}}</pre>
                    </div> -->
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <div class="col-md-10 col-md-offset-2">
                            <div class="pull-right">
                                <button ng-click="addNew()" ng-disable="addPlaceForm.invalid" class="btn btn-primary">
                                    Submit
                                </button>
                                <a href="/" class="btn btn-default">Cancel</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </legend>
    </form>
</div>
